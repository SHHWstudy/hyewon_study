# 아키텍처 설계 메모장🥕

## 📌 아키텍처 설계시
 1. ``목표 TPS 정의하기``
    - 서비스 하는 사업의 DAU/MAU 요청, 어렵다면 비슷한 서비스와 비교하기 
 2. ``병목구간 모니터링``
    - 슬루스(Sleuth), 키바나(Kibana) 등 사용하기
    - SpringBoot + Opentracing
 3. ``성능테스트``
    - 기술 문제인지 성능 문제인지 검토 필요
    - 문제상황 해결 후 입증하기 위해서는 성능테스트가 필수
    - 엔그라인더(nGrinder) 사용해보기.
   

## 📌 ``DynamoDB`` vs ElastiCache
> 일정상의 문제(러닝커브) 등으로 ``ElastiCache`` 채택 >> 현재 서비스에서 러닝커브가 크지 않을 것으로 예상 ``DynamoDB`` 채택
 - ElastiCache의 경우 VPC 영역에서 사용함. (DynamoDB, Lambda는 Amazon 영역에서 사용함)
 - ElastiCache를 사용하기 위해서는 VPC 영역을 통과해야 함. 굳이 VPC를 사용해서 리소스를 늘릴 필요가 없다고 판단함.
 - _현재 서비스에서 dynamoDB로의 러닝커브가 크지 않을 것으로 예상되어짐._


## 📌 ``DynamoDB`` vs MongoDB 
 - 높은 트래픽을 지속적으로 받고 있다면 on-premise가 적합하지만, 트래픽 수 변화가 잦다면 비용 측면에서 적합하지 않음.
 - MongoDB를 사용하기 위해서는 운영을 위한 전문가가 필요함. 경험이 없는 인원이 전담했을 시 장애 예측이 어려움. (숙련된 개발자들도 어려움!)
 - 안정적인 성능을 내기위해 파티셔닝 작업이 필요함. 이 작업을 거치면 write시 부하를 줄일 수 있음. dynamoDB의 경우 스케일 업과 파티셔닝이 자동으로 작업됨.


## 📌 ``DynamoDB``
 - 스키마가 따로 정해져 있지 않음
 - JSON 형태로 데이터 저장
 - 수평확장(scale-out)이 쉽고 유연 ``(Auto-Scaling)``
 - Primary Key로 ``Partition Key``를 가지고 있음.
    - Partition Key 때문에 응답시간이 일관됨.
 - NoSQL 엔지니어가 없어도 대용량 트래픽 처리 가능한 어플리케이션을 개발 가능
 - 데이터 자동 복제
    - 기본적으로 1개의 Region에 3개의 복제본을 만들어 놓기 때문에 한 곳에서 장애가 나더라도 가용성을 유지 가능함.
 
